"use strict";(globalThis.webpackChunkretro_react=globalThis.webpackChunkretro_react||[]).push([[9296],{"./src/components/popover/__stories__/Popover.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Basic:()=>Basic,__namedExportsOrder:()=>__namedExportsOrder,default:()=>Popover_stories});var Text=__webpack_require__("./src/components/text/Text.tsx"),react=__webpack_require__("./node_modules/react/index.js"),classNames=__webpack_require__("./src/utils/classNames.ts"),Button=__webpack_require__("./src/components/button/Button.tsx"),Portal=__webpack_require__("./src/components/portal/Portal.tsx"),emotion_styled_base_browser_esm=__webpack_require__("./node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),rgba=__webpack_require__("./src/utils/rgba.ts"),colors=__webpack_require__("./src/constants/colors.ts");const PopoverContent=(0,emotion_styled_base_browser_esm.Z)("div",{target:"e1m5qdax0"})("position:absolute;z-index:1;width:200px;padding:16px;background-color:",colors.Cj,";border:1px solid ",colors.E5,";border-radius:8px;box-shadow:0px 0px 8px ",(0,rgba.m)(colors.E5,.25),";transform:translate(-50%, 10px);top:",(_ref=>{let{$top}=_ref;return $top}),"px;left:",(_ref2=>{let{$left}=_ref2;return $left}),"px;");try{PopoverContent.displayName="PopoverContent",PopoverContent.__docgenInfo={description:"",displayName:"PopoverContent",props:{theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"Theme"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"ElementType<any>"}},$top:{defaultValue:null,description:"",name:"$top",required:!1,type:{name:"number"}},$left:{defaultValue:null,description:"",name:"$left",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/popover/Popover.styled.tsx#PopoverContent"]={docgenInfo:PopoverContent.__docgenInfo,name:"PopoverContent",path:"src/components/popover/Popover.styled.tsx#PopoverContent"})}catch(__react_docgen_typescript_loader_error){}var theme_ui_jsx_runtime_esm=__webpack_require__("./node_modules/theme-ui/jsx-runtime/dist/theme-ui-jsx-runtime.esm.js");const PopoverButton=(0,react.forwardRef)(((_ref,ref)=>{let{sx,children,className,id,isOpen,...rest}=_ref;return(0,theme_ui_jsx_runtime_esm.tZ)(Button.z,{ref,id,sx,className:(0,classNames.A)("popover-button-root",isOpen?"retro-active":"",className),...rest,children})}));PopoverButton.displayName="PopoverButton";const Popover_PopoverContent=(0,react.forwardRef)(((_ref2,ref)=>{let{id,className,children,position,sx,...rest}=_ref2;return(0,theme_ui_jsx_runtime_esm.tZ)(PopoverContent,{ref,id,sx,$top:position?.top,$left:position?.left,className:(0,classNames.A)("popover-content-root",className),...rest,children})}));Popover_PopoverContent.displayName="PopoverContent";const Popover=(0,react.forwardRef)(((_ref3,ref)=>{let{children,position="bottom",closeOnClickOutside=!0,sx,...rest}=_ref3;const[isOpen,setIsOpen]=(0,react.useState)(!1),[popoverPosition,setPopoverPosition]=(0,react.useState)({top:0,left:0}),buttonRef=(0,react.useRef)(null),popoverRef=(0,react.useRef)(null);(0,react.useEffect)((()=>{if(!isOpen)return;const rect=buttonRef.current?.getBoundingClientRect()||{top:0,left:0,width:0,height:0,right:0,bottom:0},popoverRect=popoverRef.current?.getBoundingClientRect()||{width:0,height:0};let pos={top:0,left:0};switch(position){case"top":pos={top:rect.top-popoverRect.height-rect.height/2,left:rect.left+rect.width/2};break;case"bottom":pos={top:rect.bottom,left:rect.left+rect.width/2};break;case"right":pos={top:rect.top+rect.height/2-popoverRect.height/2,left:rect.right+rect.width};break;case"left":pos={top:rect.top+rect.height/2-popoverRect.height/2,left:rect.left-rect.width}}setPopoverPosition(pos)}),[isOpen,position]),(0,react.useEffect)((()=>{if(!closeOnClickOutside||!isOpen)return;const handleClickOutside=event=>{popoverRef.current&&!popoverRef.current.contains(event.target)&&buttonRef.current&&!buttonRef.current.contains(event.target)&&setIsOpen(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}}),[isOpen,closeOnClickOutside]);const onButtonClick=()=>{setIsOpen(!isOpen)},childrenWithProps=react.Children.map(children,(child=>child?child.type===PopoverButton?(0,react.cloneElement)(child,{onClick:onButtonClick,ref:buttonRef,isOpen}):child.type===Popover_PopoverContent?(0,theme_ui_jsx_runtime_esm.tZ)(Portal.h,{children:(0,theme_ui_jsx_runtime_esm.tZ)(Popover_PopoverContent,{ref:popoverRef,position:isOpen?popoverPosition:void 0,style:{position:"fixed",visibility:isOpen?"visible":"hidden",transition:"visibility 0s linear 0.2s",left:isOpen?void 0:"-9999px"},children:child.props.children})}):child:null));return(0,theme_ui_jsx_runtime_esm.tZ)("div",{...rest,ref,sx:{position:"relative",...sx},children:childrenWithProps})}));Popover.displayName="Popover";try{PopoverButton.displayName="PopoverButton",PopoverButton.__docgenInfo={description:"A button that opens a popover.",displayName:"PopoverButton",props:{isOpen:{defaultValue:null,description:"",name:"isOpen",required:!1,type:{name:"boolean"}},color:{defaultValue:{value:"'primary'"},description:"The color of the Button.",name:"color",required:!1,type:{name:"enum",value:[{value:'"primary"'},{value:'"secondary"'},{value:'"success"'},{value:'"error"'},{value:'"warn"'}]}},variant:{defaultValue:{value:"'solid'"},description:"The visual style of the Button.",name:"variant",required:!1,type:{name:"enum",value:[{value:'"text"'},{value:'"solid"'},{value:'"outline"'}]}},disableClickEffect:{defaultValue:{value:"false"},description:"If true disables the click transform effect.",name:"disableClickEffect",required:!1,type:{name:"boolean"}},sx:{defaultValue:null,description:"",name:"sx",required:!1,type:{name:"ThemeUICSSObject"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/popover/Popover.tsx#PopoverButton"]={docgenInfo:PopoverButton.__docgenInfo,name:"PopoverButton",path:"src/components/popover/Popover.tsx#PopoverButton"})}catch(__react_docgen_typescript_loader_error){}var jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");const Popover_stories={title:"Components/Popover",component:Popover,argTypes:{position:{options:["top","right","bottom","left"],control:{type:"radio"},description:"Position of the popover relative to the trigger.",table:{defaultValue:{summary:"bottom"}}},closeOnClickOutside:{description:"Whether or not the popover should close when clicking outside of it."}}},Basic={args:{closeOnClickOutside:!0,position:"bottom",children:[(0,jsx_runtime.jsx)(PopoverButton,{children:"Open Popover"},"button"),(0,jsx_runtime.jsx)(Popover_PopoverContent,{children:(0,jsx_runtime.jsx)(Text.x,{variant:"paragraph",sx:{textAlign:"center"},children:"This is the content of the popover. You can click outside of the popover to close it."})},"content")],sx:{display:"flex",justifyContent:"center"}},render:function renderStory(args){return(0,jsx_runtime.jsx)(Popover,{...args,children:args.children})}};Basic.parameters={...Basic.parameters,docs:{...Basic.parameters?.docs,source:{originalSource:"{\n  args: {\n    closeOnClickOutside: true,\n    position: 'bottom',\n    children: [<PopoverButton key=\"button\">Open Popover</PopoverButton>, <PopoverContent key=\"content\">\n                <Text variant=\"paragraph\" sx={{\n        textAlign: 'center'\n      }}>\n                    This is the content of the popover. You can click outside of the\n                    popover to close it.\n                </Text>\n            </PopoverContent>],\n    sx: {\n      display: 'flex',\n      justifyContent: 'center'\n    }\n  },\n  render: function renderStory(args) {\n    return <Popover {...args}>{args.children}</Popover>;\n  }\n}",...Basic.parameters?.docs?.source}}};const __namedExportsOrder=["Basic"]},"./src/components/portal/Portal.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{h:()=>Portal});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),react_dom__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react-dom/index.js");const Portal=_ref=>{let{children,position}=_ref;const[mounted,setMounted]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(!1),elRef=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(document.createElement("div"));return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const element=elRef.current;return setMounted(!0),document.body.appendChild(element),position&&(element.style.position="absolute",element.style.top=`${position.top}px`,element.style.left=`${position.left}px`),()=>{document.body.removeChild(element)}}),[position]),mounted?react_dom__WEBPACK_IMPORTED_MODULE_1__.createPortal(children,elRef.current):null};try{Portal.displayName="Portal",Portal.__docgenInfo={description:"",displayName:"Portal",props:{position:{defaultValue:null,description:"",name:"position",required:!1,type:{name:"{ top: number; left: number; }"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/components/portal/Portal.tsx#Portal"]={docgenInfo:Portal.__docgenInfo,name:"Portal",path:"src/components/portal/Portal.tsx#Portal"})}catch(__react_docgen_typescript_loader_error){}}}]);